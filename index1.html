<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Earn Bot Fixed</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --primary: #0088cc; --bg: #0e1621; --card: #17212b; --accent: #fbbf24; --success: #2ed573; --danger: #ff4757; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background-color: var(--bg); color: white; overflow: hidden; padding-bottom: 80px; }
        
        /* Ad Popup Overlay */
        #ad-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(14, 22, 33, 0.98); z-index: 99999; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .timer-circle { width: 100px; height: 100px; border: 4px solid var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 35px; margin-bottom: 20px; color: var(--accent); }

        .header { padding: 20px; text-align: center; background: var(--card); border-bottom: 1px solid #242f3d; }
        .balance-amount { font-size: 35px; color: var(--accent); font-weight: bold; }
        .content { padding: 20px; height: calc(100vh - 180px); overflow-y: auto; }
        .page { display: none; }
        .page.active { display: block; }
        .task-card { background: var(--card); padding: 15px; border-radius: 15px; margin-bottom: 15px; border: 1px solid #242f3d; }
        .btn { padding: 12px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; color: white; background: var(--primary); width: 100%; margin-top: 10px; }
        .nav-bar { position: fixed; bottom: 0; width: 100%; height: 75px; background: var(--card); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #242f3d; }
        .nav-item { color: #8e99a2; font-size: 11px; text-align: center; flex: 1; cursor: pointer; }
        .nav-item.active { color: var(--primary); }
        textarea, input { width: 100%; padding: 12px; background: #0e1621; border: 1px solid #2b3949; color: white; border-radius: 8px; margin-top: 10px; }
    </style>
</head>
<body>

    <div id="ad-overlay">
        <div class="timer-circle" id="overlay-timer">15</div>
        <h3 id="ad-status">বিজ্ঞাপন দেখা হচ্ছে...</h3>
        <p style="color: #8e99a2; padding: 20px; font-size: 13px;">সতর্কতা: বিজ্ঞাপনটি ব্রাউজারে ওপেন হয়েছে। ১৫ সেকেন্ড পর এখানে ফিরে এসে বোনাস নিন।</p>
        <button id="collect-btn" class="btn" style="display:none; width: 80%; background: var(--success);" onclick="collectBonus()">বোনাস কালেক্ট করুন</button>
    </div>

    <div class="header">
        <p style="font-size: 12px; color: #8e99a2;">আপনার মোট ব্যালেন্স</p>
        <div class="balance-amount" id="main-balance">৳ 0.00</div>
    </div>

    <div class="content">
        <div id="task-page" class="page active">
            <div class="task-card">
                <div style="display:flex; justify-content:space-between"><h4>Direct Ad Task</h4><b>৳৫</b></div>
                <button class="btn" onclick="startAdFlow()">অ্যাড দেখুন</button>
            </div>

            <div class="task-card" id="yt-section">
                
