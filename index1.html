<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earn Bot Simple</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background-color: #0e1621; color: white; font-family: Arial, sans-serif; margin: 0; padding: 0; text-align: center; }
        .header { background: #17212b; padding: 30px; border-bottom: 2px solid #0088cc; }
        .balance-text { font-size: 14px; color: #8e99a2; }
        .balance-amount { font-size: 40px; color: #fbbf24; font-weight: bold; margin-top: 5px; }
        
        .main-content { padding: 20px; }
        .task-card { background: #1c2733; padding: 20px; border-radius: 15px; border: 1px solid #2b3949; margin-bottom: 20px; }
        
        .btn { display: block; width: 100%; padding: 15px; background: #0088cc; color: white; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; text-decoration: none; margin-top: 10px; }
        .btn-green { background: #2ed573; }
        
        /* Ad Timer Screen */
        #ad-box { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; flex-direction: column; align-items: center; justify-content: center; }
        #timer-num { font-size: 70px; color: #0088cc; font-weight: bold; }
        
        /* Navigation Buttons at Bottom */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: #17212b; display: flex; border-top: 1px solid #2b3949; }
        .nav-item { flex: 1; padding: 20px; color: white; font-weight: bold; cursor: pointer; border: 0.5px solid #2b3949; }
        .active-nav { background: #0088cc; }
        
        .page { display: none; padding-bottom: 100px; }
        .show { display: block; }
    </style>
</head>
<body>

    <div class="header">
        <div class="balance-text">আপনার মোট ব্যালেন্স</div>
        <div class="balance-amount" id="user-balance">৳ 0.00</div>
    </div>

    <div id="ad-box">
        <div id="timer-num">15</div>
        <p>অ্যাড দেখা হচ্ছে, অপেক্ষা করুন...</p>
        <button id="claim-btn" class="btn btn-green" style="display:none; width: 80%;" onclick="addMoney()">টাকা সংগ্রহ করুন</button>
    </div>

    <div class="main-content">
        <div id="home-page" class="page show">
            <div class="task-card">
                <h2>রেফার লিঙ্ক</h2>
                <p>বন্ধুদের ইনভাইট করে আয় করুন</p>
                <button class="btn" onclick="copyLink()">লিঙ্ক কপি করুন</button>
            </div>
        </div>

        <div id="task-page" class="page">
            <div class="task-card">
                <h2>ভিডিও অ্যাড</h2>
                <p>৳ ৫.০০ পাবেন (১৫ সেকেন্ড)</p>
                <button class="btn" onclick="startAd()">অ্যাড দেখুন</button>
            </div>
            
            <div class="task-card" id="yt-card">
                <h2>YouTube টাস্ক</h2>
                <p>৳ ৫০.০০ পাবেন</p>
                <button class="btn" style="background: red;" onclick="openSocial('https://www.youtube.com/@arshoppingmalls', 'yt')">Subscribe</button>
                <button id="yt-verify" class="btn btn-green" style="display:none;" onclick="collectSocial('yt', 50)">টাকা নিন</button>
            </div>
        </div>

        <div id="withdraw-page" class="page">
            <div class="task-card">
                <h2>উইথড্র</h2>
                <p>মিনিমাম ৫০০ টাকা</p>
                <button class="btn" onclick="alert('আপনার ব্যালেন্স কম!')">সাবমিট করুন</button>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active-nav" id="n1" onclick="showPage('home-page', 'n1')">HOME</div>
        <div class="nav-item" id="n2" onclick="showPage('task-page', 'n2')">TASK</div>
        <div class="nav-item" id="n3" onclick="showPage('withdraw-page', 'n3')">CASH OUT</div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let userData = JSON.parse(localStorage.getItem('panda_simple_db')) || { bal: 0, yt: false };

        function updateUI() {
            document.getElementById('user-balance').innerText = "৳ " + userData.bal.toFixed(2);
            if(userData.yt) document.getElementById('yt-card').style.display = 'none';
            localStorage.setItem('panda_simple_db', JSON.stringify(userData));
        }

        function showPage(pageId, navId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('show'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-nav'));
            document.getElementById(pageId).classList.add('show');
            document.getElementById(navId).classList.add('active-nav');
        }

        function startAd() {
            tg.openLink("https://otieu.com/4/10557505");
            document.getElementById('ad-box').style.display = 'flex';
            let sec = 15;
            let timer = setInterval(() => {
                sec--;
                document.getElementById('timer-num').innerText = sec;
                if(sec <= 0) {
                    clearInterval(timer);
                    document.getElementById('timer-num').innerText = "OK";
                    document.getElementById('claim-btn').style.display = 'block';
                }
            }, 1000);
        }

        function addMoney() {
            userData.bal += 5;
            updateUI();
            document.getElementById('ad-box').style.display = 'none';
            tg.showAlert("৫ টাকা যোগ হয়েছে!");
        }

        function openSocial(url, id) {
            tg.openLink(url);
            setTimeout(() => { document.getElementById(id + '-verify').style.display = 'block'; }, 8000);
        }

        function collectSocial(type, amt) {
            userData.bal += amt;
            if(type === 'yt') userData.yt = true;
            updateUI();
            tg.showAlert("টাকা যোগ হয়েছে!");
        }

        function copyLink() {
            let id = tg.initDataUnsafe.user ? tg.initDataUnsafe.user.id : "123";
            tg.openLink("https://t.me/share/url?url=https://t.me/Red_Chilii_bot?start=" + id);
        }

        updateUI();
    </script>
</body>
</html>
